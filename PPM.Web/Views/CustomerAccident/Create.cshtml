@using Foundation.Core
@using PensionInsurance.Entities
@using PensionInsurance.Shared
@using PensionInsurance.Web.Common
@model PensionInsurance.Web.Views.CustomerAccident.CreateViewModel
@section Styles{
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <link href=@Url.Content("~/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.css") rel="stylesheet" type="text/css" />
    <link href=@Url.Content("~/assets/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker3.min.css") rel="stylesheet" type="text/css" />
    <link href=@Url.Content("~/assets/global/plugins/bootstrap-timepicker/css/bootstrap-timepicker.min.css") rel="stylesheet" type="text/css" />
    <link href=@Url.Content("~/assets/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css") rel="stylesheet" type="text/css" />
    <link href=@Url.Content("~/assets/global/plugins/clockface/css/clockface.css") rel="stylesheet" type="text/css" />
    <link href=@Url.Content("~/assets/global/plugins/bootstrap-select/css/bootstrap-select.min.css") rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL PLUGINS -->
}
<!-- BEGIN PAGE BAR -->
@section Breadcrumb{
    <div class="page-bar">
        <ul class="page-breadcrumb">
            <li>
                <a href="@Url.Action("Index","Home")">首页</a>
                <i class="fa fa-circle"></i>
            </li>
            <li>
                <a href="@Url.Action("Index","Employee")">事件/事故报告(健康安全)</a>
                <i class="fa fa-circle"></i>
            </li>
            <li>
                <span>新增</span>
            </li>
        </ul>
    </div>
}

<div class="full-height-content-body">
    <form data-ajax="true"  action="@Url.Action("Create", "CustomerAccident")" method="POST" class="form-horizontal">
        <div class="portlet light portlet-fit portlet-form protlet-border">
            <div class="portlet-title title-style">
                <div class="caption">
                    <i class="icon-bubble font-green-sharp"></i>
                    <span class="caption-subject font-green-sharp sbold">基本信息</span>
                </div>
            </div>
            <div class="portlet-body form">
                <!-- BEGIN FORM-->
                <div class="form-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">项目</label>
                                <div class="col-md-8">
                                    @Html.InputText(m => m.ProjectName, new { @class = "form-control", @readonly = "readonly" })
                                    @Html.HiddenFor(x => x.CustomerAccountId)
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">长辈姓名</label>
                                <div class="col-md-8">
                                    @Html.InputText(m => m.CustomerName, new { @class = "form-control", @readonly = "readonly" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">性别</label>
                                <div class="col-md-8">
                                    @Html.InputText(m => m.CustomerSex, new { @class = "form-control", @readonly = "readonly" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">年龄</label>
                                <div class="col-md-8">
                                    @Html.InputText(m => m.CustomerAge, new { @class = "form-control", @readonly = "readonly" })
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">房间/床号</label>
                                <div class="col-md-8">
                                    <input value="@($"{Model.Room.Name}房间{Model.Bed.Name}床")" class="form-control" readonly="readonly" />
                                    @Html.HiddenFor(x => x.RoomId)
                                    @Html.HiddenFor(x => x.BedId)
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">照护级别</label>
                                <div class="col-md-8">
                                    @Html.InputText(m => m.Nursinglevel, new { @class = "form-control", @readonly = "readonly" })
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>


            <div class="portlet-title title-style">
                <div class="caption">
                    <i class="icon-bubble font-green-sharp"></i>
                    <span class="caption-subject font-green-sharp sbold">身体信息</span>
                </div>
            </div>
            <div class="portlet-body form">
                <!-- BEGIN FORM-->
                <div class="form-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">神经系统</label>
                                <div class="col-md-8">
                                    @Html.DropDownListFor(m => m.NervousDiseases, Model.NervousDiseaseList, new { multiple = "", @class = "selectpicker" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">心血管系统</label>
                                <div class="col-md-8">
                                    @Html.DropDownListFor(m => m.CardiovascularDiseases, Model.CardiovascularDiseaseList, new { multiple = "", @class = "selectpicker" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">内分泌系统</label>
                                <div class="col-md-8">
                                    @Html.DropDownListFor(m => m.EndocrineDiseases, Model.EndocrineDiseaseList, new { multiple = "", @class = "selectpicker" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">呼吸系统</label>
                                <div class="col-md-8">
                                    @Html.DropDownListFor(m => m.RespiratoryDiseases, Model.RespiratoryDiseaseList, new { multiple = "", @class = "selectpicker" })
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">泌尿系统</label>
                                <div class="col-md-8">
                                    @Html.DropDownListFor(m => m.UrinaryDiseases, Model.UrinaryDiseaseList, new { multiple = "", @class = "selectpicker" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">消化系统</label>
                                <div class="col-md-8">
                                    @Html.DropDownListFor(m => m.DigestiveDiseases, Model.DigestiveDiseaseList, new { multiple = "", @class = "selectpicker" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">感官系统</label>
                                <div class="col-md-8">
                                    @Html.DropDownListFor(m => m.SensoryDiseases, Model.SensoryDiseaseList, new { multiple = "", @class = "selectpicker" })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">运动系统</label>
                                <div class="col-md-8">
                                    @Html.DropDownListFor(m => m.MovementDiseases, Model.MovementDiseaseList, new { multiple = "", @class = "selectpicker" })
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label class="control-label col-md-2">其他疾病</label>
                                <div class="col-md-10">
                                    @Html.InputText(x => x.OtherDiseases)
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <div class="portlet-title title-style">
                <div class="caption">
                    <i class="icon-bubble font-green-sharp"></i>
                    <span class="caption-subject font-green-sharp sbold">事件/事故信息</span>
                </div>
            </div>
            <div class="portlet-body form">
                <!-- BEGIN FORM-->
                <div class="form-body">
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">发生时间</label>
                                <div class="col-md-8">
                                    @Html.InputDate(m => m.AccidentTime)
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">在场人员</label>
                                <div class="col-md-8">
                                    @Html.DropDownListFor(m => m.AccidentScene, SettingType.事故在场人员, true)
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">事件/事故</label>
                                <div class="col-md-8">
                                    @Html.DropDownListFor(m => m.AccidentType, SettingType.事故事件类型, true)
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3" id="OtherAccidentType">
                            <div class="form-group">
                                <label class="control-label col-md-4">其他事件/事故</label>
                                <div class="col-md-8">
                                    @Html.InputText(m => m.OtherAccidentType)
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row">


                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">发生地点</label>
                                <div class="col-md-8">
                                    @Html.DropDownListFor(m => m.Accidentlocation, SettingType.事故发生地点, true)
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3" id="OtherAccidentlocation">
                            <div class="form-group">
                                <label class="control-label col-md-4">其他地点</label>
                                <div class="col-md-8">
                                    @Html.InputText(m => m.OtherAccidentlocation)
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">长辈情况</label>
                                <div class="col-md-8">
                                    @Html.DropDownListFor(m => m.AccidentInjury, SettingType.事故长辈情况, true)
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3" id="OtherAccidentInjury">
                            <div class="form-group">
                                <label class="control-label col-md-4">其他情况</label>
                                <div class="col-md-8">
                                    @Html.InputText(x => x.OtherAccidentInjury)
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">是否就医</label>
                                <div class="col-md-8">
                                    @Html.DropDownListFor(m => m.IsSeeingTheDoctor, true)
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="form-group">
                                <label class="control-label col-md-4">医院诊断</label>
                                <div class="col-md-8">
                                    @Html.DropDownListFor(m => m.DiagnosisResults, SettingType.事故诊断结果, true)
                                </div>
                            </div>
                        </div>
                        <div class="col-md-3" id="OtherDiagnosisResults">
                            <div class="form-group">
                                <label class="control-label col-md-4">其他诊断结果</label>
                                <div class="col-md-8">
                                    @Html.InputText(x => x.OtherDiagnosisResults)
                                </div>
                            </div>
                        </div>

                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="control-label col-md-1">事故/事件描述</label>
                                <div class="col-md-11">
                                    <textarea class="form-control" name="Description" style="min-height: 80px;"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="control-label col-md-1">联系家属情况</label>
                                <div class="col-md-11">
                                    <textarea class="form-control" name="ContactFamilyResults" style="min-height: 80px;"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-12">
                            <div class="form-group">
                                <label class="control-label col-md-1">
                                    事件/事故
                                    原因分析
                                    及处理措施
                                </label>
                                <div class="col-md-11">
                                    <textarea class="form-control" name="AccidentReason" style="min-height: 80px;"></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="errors alert alert-danger fade in" style="display: none;"></div>
        <div class="form-actions">
            <div class="text-center">

                <button id="SaveForm" class="btn green btn-sm padding-lf-15 ">保存</button>

                <button type="button" class="btn yellow btn-sm padding-lf-15 " onclick="javascript: history.back(-1);">返回上一页</button>
            </div>
        </div>
    </form>
</div>
@section Scripts{
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <script src=@Url.Content("~/assets/global/plugins/bootstrap-fileinput/bootstrap-fileinput.js") type="text/javascript"></script>
    <!-- END PAGE LEVEL PLUGINS -->
    <script src=@Url.Content("~/assets/global/plugins/moment.min.js") type="text/javascript"></script>
    <script src=@Url.Content("~/assets/global/plugins/bootstrap-daterangepicker/daterangepicker.min.js") type="text/javascript"></script>
    <script src=@Url.Content("~/assets/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js") type="text/javascript"></script>
    <script src=@Url.Content("~/assets/global/plugins/bootstrap-timepicker/js/bootstrap-timepicker.min.js") type="text/javascript"></script>
    <script src=@Url.Content("~/assets/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js") type="text/javascript"></script>
    <script src=@Url.Content("~/assets/global/plugins/clockface/js/clockface.js") type="text/javascript"></script>
    <script src=@Url.Content("~/assets/global/scripts/app.min.js") type="text/javascript"></script>
    <script src=@Url.Content("~/assets/global/plugins/bootstrap-select/js/bootstrap-select.min.js") type="text/javascript"></script>
    <script type="text/javascript">
        $(document).ready(function () {


            $('.selectpicker').selectpicker({
                style: 'btn-xs',
                iconBase: 'fa',
                tickIcon: 'fa-check',
                noneSelectedText: "--未选择--"
            });

            $("#OtherAccidentType").hide();
            $("#OtherAccidentlocation").hide();
            $("#OtherAccidentInjury").hide();
            $("#OtherDiagnosisResults").hide();

            $("#AccidentType").on("change", function (e) {
                var $this = $(this);
                if ($this.val() == "其他") {
                    $("#OtherAccidentType").show();
                }
                else {
                    $("#OtherAccidentType").hide();
                }
            });

            $("#Accidentlocation").on("change", function (e) {
                var $this = $(this);
                if ($this.val() == "其他") {
                    $("#OtherAccidentlocation").show();
                }
                else {
                    $("#OtherAccidentlocation").hide();
                }
            });

            $("#AccidentInjury").on("change", function (e) {
                var $this = $(this);
                if ($this.val() == "其他外伤") {
                    $("#OtherAccidentInjury").show();
                }
                else {
                    $("#OtherAccidentInjury").hide();
                }
            });

            $("#DiagnosisResults").on("change", function (e) {
                var $this = $(this);
                if ($this.val() == "其他") {
                    $("#OtherDiagnosisResults").show();
                }
                else
                {
                    $("#OtherDiagnosisResults").hide();
                }
            });






        });
    </script>
}


